
<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />	<title>Persevere - The Dojo Foundation</title>
	<meta name="author" content="Dojo Foundation"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>{{site.name}}  - {{site.title}} - {{site.url}} - {{ page.title }}</title>
	<link rel="stylesheet" href="/packages/ddoc/css/ddoc.css" media="screen">
	<link rel="stylesheet" href="/packages/ddoc/css/layout.css" media="screen">
	<script src="http://downloads.dojotoolkit.org/release-1.7.0/dojo-release-1.7.0/dojo/dojo.js"
			data-dojo-config="async: true">
	</script>
	<script>
		require({
			paths: {
				ddoc:'/packages/ddoc',
				'put-selector':'/packages/put-selector',
				'xstyle':'/packages/xstyle',
				dgrid:'/packages/dgrid'
			}
		},["ddoc/ddoc"]);
	</script>
  </head>
  
<body>
<div id="bg-light">
<div id="wrapper">
	<div id="header">
	<a id="logo" href="/"></a>
	<div class="menu">
		<ul> 
			
					<li><a class="home" href="/">Home</a></li> 
					
					<li class="page_item page-item-2"><a href="License" title="License">License</a> </li> 
<li class="page_item page-item-26"><a href="Installation" title="Installation">Installation</a></li> 
<li class="page_item page-item-46"><a href="Tutorials" title="Tutorials">Tutorials</a></li> 
<li class="page_item page-item-5"><a href="Documentation" title="Documentation">Documentation</a> </li> 
<li class="page_item page-item-40"><a href="Demos" title="Demos">Demos</a> </li> 
<li class="page_item page-item-38"><a href="http://www.sitepen.com/blog/category/persevere/" title="Blog">Blog</a></li> 
 
				</ul>
	</div><!-- end of menu -->
</div><!-- end of header -->	
	<div class="shadow-sep"></div><!-- end of shadow-sep -->
	
	<div id="main-content">
		<div id="toc"></div>	
        <div id="content" class="site">

<div class="wikistyle"><p>XStyle is a framework for shimming (or polyfilling) and extending CSS, to efficiently support various 
plugins for additional CSS functionality and backwards compatibility of newer features.</p>

<p>A simple example of using XStyle to shim CSS:</p>

<pre>
@import "/path/to/xstyle/shims.css";
.my-class {
    box-shadow: 10px 10px 5px #888888;
    transform: rotate(10deg);
}
</pre>

<p>Here, we can use newer CSS properties like 'box-shadow' and 'transform' and XStyle
will shim (or "polyfill" or "fix") older browsers for you. XStyle will scan your stylesheet, load the shims.css which defines the CSS extensions
for the rules for shimming, and process the stylesheet. </p>

<p>You can also use XStyle as a CSS loader plugin for AMD loaders like Dojo and RequireJS:</p>

<pre>define(["xstyle!./path/to/example.css"], function(){
    // module starts after css is loaded
});
</pre>

<p>XStyle is plugin based so that new shims and extensions can be selected and combined
without incurring additional CSS parsing overhead. XStyle is designed to allow for plugins to be 
registered to handle different CSS properties, so that the shims and extensions that are
applied can be explicilty controlled for each stylesheet.</p>

<p>The shims.css stylesheet (referenced in the example above) includes a number of out
of the box shims to upgrade older browsers for modern CSS properties including: opacity, 
bottom, right, transition, border-radius, box-shadow, box-sizing, border-image, transform.
The shims.css stylesheet also defines shims for pseudo selectors including hover and focus.
By @import'ing shims.css into a stylesheet, these shims will be defined and we can using.
The rule definitions are transitive, so if stylesheet A @import's stylesheet B, which @import's
shims.css, both A and B stylesheets will have the shims applied. If another stylesheet C is
later independently loaded and it doesn't import any stylesheets, none of the shims
will be applied to it.</p>

<p>XStyle also includes an ext.css stylesheet that enables a number of CSS extensions
including :supported and :unsupported pseudo selectors, and an -x-widget CSS property
for instantiated widgets. </p>

<p>We can also explicitly define exactly which properties and other CSS elements to shim 
or extend. The XStyle parser looks for extension rules. The first rule is x-property
which defines how a CSS property should be handled. A rule with an 'x-property' selector
make define properties with values indicating how the corresponding CSS property 
should be handled. Let's look at a simplified example from shims.css to see how we 
could shim the 'box-shadow' property to use an IE filter:</p>

<pre>x-property {
    box-shadow: require(xstyle/shim/ie-filter);
}       
</pre>

<p>Here we defined that the CSS property 'box-shadow' should be handled by the 'xstyle/shim/ie-filter' 
module. The ie-filter module converts the CSS property to an MS filter property so that
we can enable a box shadow in IE. Now, we could later create a rule that uses this property:</p>

<pre>.my-box: {
    box-shadow: 10px 10px 5px #888888;
}
</pre>

<p>However, this was indeed a simplified. For shims, we usually only want to apply the 
shimming module if the property is not natively supported. We can do this with the
default and prefix property values. The rule in shims.css looks like this:</p>

<pre>x-property {
    box-shadow: default, prefix, require(xstyle/shim/ie-filter);
}       
</pre>

<p>This extension rule includes multiple, comma separated values. The first value is 'default'.
This indicates that first XStyle should check if the 'box-shadow' is natively supported
by the browser in standard form. If it is, then no further extensions or modifications to the CSS are applied.
The next value is 'prefix'. This indicates that first XStyle should check if the 'box-shadow' 
is supported by the browser with a vendor prefix (like -webkit- or -moz-). If it is, then 
the vendor prefix is added to the CSS property to enable it. Finally, if 'box-shadow' is
not supported in standard form or with a vendor prefix, then the ie-filter module is
loaded to apply the MS filter.</p>

<h1>Import Fixing</h1>

<p>Another feature XStyle provides is reliable @import behavior. Internet Explorer is not
capable of loading multiples levels deep @imports. XStyle provides @import "flattening"
to fix this IE deficiency.</p>

<p>XStyle also normalizes @import once behavior. If two stylesheets both @import the
same sheetsheet, XStyle ensures that the @import'ed stylesheet is only imported once (by the first
stylesheet) and the second @import is removed. This is a powerful feature because
it allows stylesheets to @import another stylesheet without worrying about overriding
another stylesheet that expected to come after the target sheet due to it's @import statement.</p>

<h2>Available Shims (and limitations)</h2>

<p>The following shim modules come with XStyle:
* xstyle - XStyle itself provide vendor prefix shimming with the prefix property. This is
used to shim border-radius, box-shadow, box-sizing, and border-image.
* shim/ie-filter - This creates MS filters to emulate standard CSS properties. This is used to shim
box-shadow and transform.
* shim/transition - This provides animated CSS property changes to emulates the CSS transition property.
* shim/boxOffsets - This provides absolute positioning in older versions of IE to emulate
bottom and right CSS properties.</p>

<h1>Available Extensions</h1>

<p>The following shim modules come with XStyle:
* ext/pseudo - This modules provides emulation of hover, focus and other pseudos that
are not present in older versions of IE.
* ext/scrollbar - This module provides scrollbar measurement so that elements can be sized
based on the size of the scrollbar.
* ext/supported - 
* ext/widget - This module can instantiate widgets to be applied to elements that match
a rule's selector. This is designed to instantiate widgets with the form of Widget(params, targetNode),
and can be used to instantiate Dojo's Dijit widgets.</p>

<h1>Creating Extension Modules</h1>

<p>XStyle is a plugin-based and you are encouraged to create your own CSS extension modules/plugins.
An extension module that handles extension properties should return an object with an 
onProperty function that will be called each time the extension property is encountered.
The onProperty function has the signature:</p>

<pre>onProperty(name, value, rule);
</pre>

<p>Where 'name' is the CSS property name, 'value' is the value of the property, and 'rule'
is an object representing the whole rule. The onProperty function can return CSS properties
in text form to easily provide substitutionary CSS.</p>

<p>Extension modules may need to do more sophisticated interaction than just CSS replacement.
If an extension module needs to actually interact with and manipulate the DOM, it may
use the 'elemental' module to add an element renderer that will be executed for each
DOM element that matches the rule's selector.</p></div>

        </div><!-- end of content -->
	
	
	
</div><!-- end of main-content -->
<div class="clear"></div>
</div><!-- end of wrapper -->
<div id="footer">
	<div class="footer-content">
		<div class="footer-left">
				<span class="redundant">&copy;</span> <a href="http://dojofoundation.org">The Dojo Foundation</a>, All Rights Reserved.
				&nbsp;&nbsp;&nbsp;<a href="http://dojotoolkit.org/license">License Information</a>
		</div><!-- end of footer-left -->
		
		<div class="footer-right">
			<span>Internet Application Management provided by <a href="http://www.reliam.com/">Reliam, Inc.</a></span>
		</div><!-- end of footer-right -->
	</div><!-- end of footer-content -->
</div><!-- end of footer -->
</body>
</html>